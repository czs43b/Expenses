import{a as j}from"./chunk-67SE732Q.js";import"./chunk-FNW6C2EI.js";import{a as R,b as E,c as T,d as V,e as x,f as A,g as y,h as w,i as D,j as q,k as G}from"./chunk-5U7AXR3O.js";import{Ca as C,Hb as h,R as m,S as d,aa as p,ca as F,db as _,ga as u,ha as n,ia as t,ja as f,jb as S,lb as I,ob as N,pa as g,x as v,y as b,ya as r}from"./chunk-PTYEF7PQ.js";import"./chunk-6H46YYVM.js";function k(i){return e=>i.test(e.value)?{forbiddenName:{value:e.value}}:null}function P(i,e){i&1&&(n(0,"div",6),r(1,"Title is a required field"),t())}function O(i,e){i&1&&(n(0,"div",6),r(1,"Price is a required field"),t())}function B(i,e){i&1&&(n(0,"div",6),r(1,"Contains an illegal name"),t())}function L(i,e){i&1&&(n(0,"div",6),r(1,"Unauthorised! Please login to add/update items."),t())}var M=class i{constructor(e,a,o,l){this.fb=e;this.afs=a;this.activatedRoute=o;this.router=l;this.expenseForm=this.fb.group({price:new x("",[E.required]),title:new x("",[E.required]),description:new x("",[k(/craig/i)])})}expenseForm;expenseId;isLoggedIn=v(h).isLoggedIn();authorised;authService=v(h);unauthorised=!1;ngOnInit(){this.isLoggedIn.subscribe(e=>{this.authorised=e}),this.activatedRoute.params.subscribe({next:e=>this.expenseId=e.id}),this.getExpense(this.expenseId)}getExpense(e){this.afs.getExpense(e).subscribe(a=>{this.expenseForm.patchValue(a)})}addExpense(){this.authorised?(this.afs.addExpense(this.expenseForm.value),this.router.navigate(["./"])):this.unauthorised=!0}updateExpense(){this.expenseForm.valid&&this.authorised?(this.activatedRoute.params.subscribe({next:e=>e.id?this.afs.updateExpense(e.id,this.expenseForm.value):this.afs.addExpense(this.expenseForm.value)}),this.router.navigate(["./"])):(this.expenseForm.markAllAsTouched(),this.expenseForm.hasError,this.unauthorised=!0)}static \u0275fac=function(a){return new(a||i)(d(q),d(j),d(S),d(I))};static \u0275cmp=b({type:i,selectors:[["app-expense-form"]],standalone:!0,features:[C],decls:23,vars:5,consts:[[1,"row"],[1,"col-lg-6"],[3,"formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Title","formControlName","title",1,"form-control"],[1,"form-text","text-danger","fw-bold"],["for","price",1,"form-label"],["type","number","id","price","placeholder","Price","formControlName","price",1,"form-control"],["for","description",1,"form-label"],["type","password","id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-success",3,"click"]],template:function(a,o){if(a&1&&(n(0,"div",0)(1,"div",1)(2,"h4"),r(3,"Expense Form"),t(),n(4,"form",2)(5,"div",3)(6,"label",4),r(7,"Title"),t(),f(8,"input",5),p(9,P,2,0,"div",6),t(),n(10,"div",3)(11,"label",7),r(12,"Price"),t(),f(13,"input",8),p(14,O,2,0,"div",6),t(),n(15,"div",3)(16,"label",9),r(17,"Description"),t(),f(18,"textarea",10),p(19,B,2,0,"div",6),t(),n(20,"button",11),g("click",function(s){return s.preventDefault(),o.updateExpense()}),r(21,"Save Changes"),t()(),p(22,L,2,0,"div",6),t()()),a&2){let l,s,c;m(4),F("formGroup",o.expenseForm),m(5),u((l=o.expenseForm.get("title"))!=null&&l.hasError("required")&&((l=o.expenseForm.get("title"))!=null&&l.touched)?9:-1),m(5),u((s=o.expenseForm.get("price"))!=null&&s.hasError("required")&&((s=o.expenseForm.get("price"))!=null&&s.touched)?14:-1),m(5),u((c=o.expenseForm.get("description"))!=null&&c.hasError("forbiddenName")&&((c=o.expenseForm.get("description"))!=null&&c.touched)?19:-1),m(3),u(o.unauthorised?22:-1)}},dependencies:[_,G,A,R,y,T,V,w,D,N]})};export{M as ExpenseFormComponent};
